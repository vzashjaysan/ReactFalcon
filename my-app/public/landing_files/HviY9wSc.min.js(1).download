window.Dmdbase_CDC={};
window.Dmdbase_CDC={cookieName:"dmdbase_cdc",dimensions:{},logging:!1,enableTNT:!1,enableAnalytics:!0,DB_DEFAULT_VALUE:"ISP Visitor",NOT_IN_AWLIST:"Not In List",NOT_ASSIGNED_AWLIST_VALUE:"In List No Value",CompanyProfile:{},targetAttributes:"demandbase_sid company_name industry sub_industry employee_range revenue_range audience audience_segment state country_name marketing_alias b2b b2c, web_site watch_list_account_type watch_list_account_status".split(" "),useStorage:!0,useCookie:!0,targetReady:!1,
init:function(){"true"===this.cdc_getParamByName("cdc_debug")&&(this.logging=!0)},setupDimensions:function(){this.dimensions.set1={demandbase_sid:10,company_name:40,industry:40,sub_industry:40,employee_range:30,revenue_range:10,audience:30,audience_segment:30};this.dimensions.set2={marketing_alias:35,city:50,state:5,country_name:20,watch_list_account_type:10,watch_list_account_status:10,watch_list_source_name_grouping:80,watch_list_isp_service:20};this.dimensions.set3={watch_list_mh:30,watch_list_mh_tal:30,
watch_list_unit_tal:30,watch_list_mg:30,watch_list_slm:30,watch_list_t25:30,watch_list_t3:30,watch_list_clt:30};this.dimensions.set4={watch_list_g2k:30,watch_list_f500:30,watch_list_communications_americas:30,watch_list_communications_europe:30,watch_list_energy_americas:30,watch_list_energy_europe:30,watch_list_resources_americas:30,watch_list_services_americas:30};this.dimensions.set5={watch_list_services_europe:30,watch_list_source_anz:30,watch_list_source_seamea:30,watch_list_utilities_americas:30,
watch_list_utilities_europe:30,placeholder:30,placeholder1:30,placeholder2:30}},callback:function(a){if(a)try{window.Dmdbase_CDC.init(),a=this.flatten(a),window.Dmdbase_CDC.CompanyProfile=a,this.enableAnalytics&&this.setAnalytics(window.Dmdbase_CDC.CompanyProfile),this.enableTNT&&this.setMbox(window.Dmdbase_CDC.CompanyProfile)}catch(b){window.console&&this.logging&&console.log("DB _ "+b.message)}},loadAnalytics:function(){this.setAnalytics(window.Dmdbase_CDC.CompanyProfile)},setAnalytics:function(a){try{this.setupDimensions(),
window.sessionStorage&&!sessionStorage.getItem("s_dmdbase")&&this.isCookieSet(this.cookieName)&&this.storeSessionData(a),this.isCookieSet(this.cookieName)||this.storeSessionData(a)}catch(b){window.console&&this.logging&&console.log("DB _ "+b.message)}},storeSessionData:function(a){a=this.buildDelimitedStrings(":",a);this.isCookieSet(this.cookieName)||this.saveToCookie(this.cookieName,"DBSET",1);window.Dmdbase_CDC.contextData=a;if(window.sessionStorage&&this.useStorage)for(sessionStorage.setItem("s_dmdbase",
window.Dmdbase_CDC.contextData[0]),a=1;a<window.Dmdbase_CDC.contextData.length;a++)sessionStorage.setItem("s_dmdbase_custom"+a,window.Dmdbase_CDC.contextData[a])},setMbox:function(a){try{null!==window.TNT&&"object"===typeof window.TNT&&this.set_mbox_variables(a)}catch(b){window.console&&this.logging&&console.log("DB _ "+b.message)}},flatten:function(a){for(var b in a)if("object"==typeof a[b]&&null!==a[b]&&a.hasOwnProperty(b)){for(var c in a[b])a[b].hasOwnProperty(c)&&(a[b+"_"+c]=a[b][c]);delete a[b]}return a},
saveToCookie:function(a,b){var c=new Date;c.setTime(c.getTime()+18E5);var c="; expires="+c.toGMTString(),d="; domain="+this.getDomain(document.location.href);document.cookie=a+"="+encodeURIComponent(b)+c+d+"; path=/"},getCookieByName:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1);if(-1!=d.indexOf(a))return decodeURIComponent(d.substring(a.length,d.length))}return""},getHostName:function(a){a=a.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);
return null!=a&&2<a.length&&"string"===typeof a[2]&&0<a[2].length?a[2]:null},getDomain:function(a){var b=a=this.getHostName(a);if(null!=a){var c=a.split(".").reverse();null!=c&&1<c.length&&(b="."+c[1]+"."+c[0],-1!=a.toLowerCase().indexOf(".co.uk")&&2<c.length&&(b="."+c[2]+"."+b))}return b},isCookieSet:function(a){return(a=this.getCookieByName(a))&&"undefined"!=a},buildDelimitedStrings:function(a,b){var c=this.dimensions,d=[],f;for(f in c)if(c.hasOwnProperty(f)){var g="",e;for(e in c[f])if(c[f].hasOwnProperty(e)){var h=
-1!=e.indexOf("watch_list")&&"Detailed"===b.information_level&&b.hasOwnProperty(e)?this.truthy(b[e],this.NOT_ASSIGNED_AWLIST_VALUE):-1==e.indexOf("watch_list")||"Detailed"!==b.information_level||b.hasOwnProperty(e)?this.truthy(b[e],this.DB_DEFAULT_VALUE):this.truthy(b[e],this.NOT_IN_AWLIST);h=this.resizeStr(h,c[f][e]);g+=h+a}g=g.substring(0,g.length-1);g=this.resizeStr(g,255);d.push(g)}return d},resizeStr:function(a,b){a.length>b&&(a=a.substring(0,b));return a},truthy:function(a,b){return a||(!1===
a?a:b)},cdc_getParamByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},set_mbox_variables:function(a){try{var b="",c;for(c in a)a.hasOwnProperty(c)&&-1!=this.targetAttributes.indexOf(c)&&(b+="profile."+c+"="+a[c]+",");b=b.split(",");if("undefined"!==typeof mboxFactoryDefault){var d=mboxFactoryDefault.getUrlBuilder();d.addParameters(b)}}catch(f){console.log(f)}}};
